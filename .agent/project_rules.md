# 项目规则：抖音评论采集器

本项目开发与执行过程中必须严格遵守以下规则。

## 1. 目录与文件结构规范 (严格)
*   **根目录**: 仅包含配置文件（如 `requirements.txt`, `.gitignore`）和启动脚本（可选）。
*   **`.agent/`**: 存放代理规则、任务列表及相关元数据 (`project_rules.md`, `task.md`)。
*   **`docs/`**: 存放所有项目文档 (`feasibility_analysis.md`, `implementation_plan.md` 等)。
*   **`src/`**: 存放所有源代码 (`main.py`, `scraper.py`, `utils.py`)。
*   **`data/`**: (可选) 存放采集结果和临时数据。

## 2. 法律与合规性 (零容忍)
*   **合法采集**: 必须采用最稳妥、合法的技术手段。
    *   **严禁** 使用任何黑客手段、漏洞利用或破坏性攻击。
    *   **严禁** 采集非公开数据或绕过授权验证（如破解账号密码）。
*   **隐私保护**: 严格遵守隐私法律，仅采集公开可见的评论内容，不得通过技术手段挖掘用户隐私信息。
*   **数据使用**: 采集的数据仅用于本项目分析，**严禁** 用于非法用途或出售。

## 3. 技术架构
*   **语言**: Python 3.10+
*   **核心框架**: Playwright (同步或异步 API) - 模拟真实用户行为，确保合规与稳定。
*   **浏览器引擎**: Chromium。
*   **语言规范**: 所有文档、注释、日志及交互必须使用中文。

## 4. 操作规则

### 4.1 搜索与发现
*   **入口点**: `https://www.douyin.com/search/复刻台球杆`
*   **筛选**:
    *   必须通过UI交互应用“发布时间”筛选。
    *   **严格规则**: 后期处理视频时间戳，确保其落在“过去3天”的时间窗口内。

### 4.2 交互与反检测 (模拟真实用户)
*   **行为模拟**:
    *   **随机延迟**: 所有动作必须包含随机延迟。
    *   **频率控制**: 严格控制请求频率，避免对服务器造成压力（DoS风险）。
*   **登录会话**:
    *   如果需要登录，必须由用户手动完成或使用用户提供的合法凭证（Cookies）。**严禁** 自动尝试破解或绕过登录。

### 4.3 数据提取与过滤
*   **关键词匹配**: `["怎么买", "价格", "多少钱", "求购", "带价"]`。
*   **排除**: 排除垃圾信息。

## 5. 错误处理
*   **反爬虫触发**: 如果遇到验证码或拦截，立即暂停并通知用户，**严禁** 暴力重试。
